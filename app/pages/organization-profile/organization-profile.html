<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../../../bower_components/neon-animation/web-animations.html">
<link rel="import" href="../../../bower_components/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="../../../bower_components/vientos-iconset/vientos-iconset.html">

<link rel="import" href="../../cards/intent-preview/intent-preview.html">

<link rel="import" href="organization-profile-styles.html">

<dom-module id="organization-profile">
  <template>

    <style include="organization-profile-styles"></style>

    <header>
      <paper-icon-button icon="vientos:arrow-back" on-tap="_back"></paper-icon-button>
      <h2>
        [[project.name]]
      </h2>
      <template is="dom-if" if="[[admin]]">
        <paper-icon-button
          raised
          on-tap="_editDetails"
          icon="vientos:artculture"
          disabled="[[!online]]"
          ></paper-icon-button>
      </template>
      <template is="dom-if" if="[[canFollow]]">
        <template is="dom-if" if="[[!following]]">
          <paper-icon-button
          raised
          icon="vientos:follow"
          on-tap="_follow"
          disabled="[[!online]]"
          ></paper-icon-button>
        </template>
        <template is="dom-if" if="[[following]]">
          <paper-icon-button
          raised
          icon="vientos:follow"
          set
          on-tap="_unfollow"
          disabled="[[!online]]"
          ></paper-icon-button>
        </template>
      </template>
    </header>


    <section id="logo">
      <template is="dom-if" if="[[project.logo]]">
        <iron-image
          class="org-logo"
          src="[[_getThumbnailUrl(project, 150)]]"
          sizing="cover"></iron-image>
      </template>
    </section>
    <template is="dom-if" if="[[project.description]]">
      <section id="project-description">
        [[project.description]]
      </section>
    </template>
    <template is="dom-if" if="[[project.locations.length]]">
      <section id="project-location">
          <h3>[[localize('label:address')]]</h3>
          <ul>
            <template is="dom-repeat" items="[[project.locations]]" as="placeId">
              <li>
                <paper-button
                  raised
                  on-tap="_showLocationOnMap">
                  <iron-icon icon="vientos:crosshairs"></iron-icon>
                  <span class="ellipsis">[[_getPlaceAddress(placeId, places)]]</span>
                </paper-button>
              </li>
            </template>
          </ul>
      </section>
    </template>
    <template is="dom-if" if="[[project.categories]]">
      <section id="categories">
        <h3>[[localize('label:categories')]]</h3>
        <ul>
          <template is="dom-repeat" items="[[project.categories]]" as="category">
            <li>
              <iron-icon icon="vientos:[[category]]"></iron-icon>
              <div>[[localize(category)]]</div>
            </li>
          </template>
        </ul>
      </section>
    </template>
    <template is="dom-if" if="[[_showLinksAndContacts(project)]]">
      <section>
        <h3>[[localize('label:contacts-links')]]</h3>
        <ul>
        <template is="dom-repeat" items="[[project.links]]">
          <li><a href="[[item]]" target="_blank">[[item]]</a></li>
        </template>
        </ul>
        <ul>
        <template is="dom-repeat" items="[[project.contacts]]">
          <li>[[item]]</li>
        </template>
        </ul>
      </section>
    </template>


<template is="dom-if" if="[[admin]]">
  <paper-button
    class="primary-action"
    disabled="[[!online]]"
    on-tap="_newIntent">
    <iron-icon icon="vientos:add-intent"></iron-icon>
    [[localize('button:add-intent')]]
  </paper-button>
</template>

<section id="active-intents">
  <h3>
    [[localize('intents')]]
  </h3>
  <div>
    <template is="dom-repeat" items="[[activeIntents]]">
      <intent-preview intent="[[item]]"></intent-preview>
    </template>
  </div>
</section>
<template is="dom-if" if="[[admin]]">
  <section id="expired-intents">
    <h3>
      [[localize('label:expired-intents')]]
    </h3>
    <div>
      <template is="dom-repeat" items="[[expiredIntents]]">
        <intent-preview intent="[[item]]"></intent-preview>
      </template>
    </div>
  </section>
  <section id="inactive-intents">
    <h3>
      [[localize('label:inactive-intents')]]
    </h3>
    <div>
      <template is="dom-repeat" items="[[inactiveIntents]]">
        <intent-preview intent="[[item]]"></intent-preview>
      </template>
    </div>
  </section>
</template>

  </template>

  <script src="organization-profile.js"></script>

</dom-module>
