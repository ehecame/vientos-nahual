<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../components/vientos-card/vientos-card.html">
<link rel="import" href="../../bower_components/vientos-iconset/vientos-iconset.html">
<link rel="import" href="intent-preview-styles.html">

<dom-module id="intent-preview">
  <template>

    <style include="intent-preview-styles"></style>

    <vientos-card on-tap="_showIntentDetails">
      <header>
        <div class="info">
          <p>
          <template is="dom-if" if="[[favoring]]">
            <iron-icon icon="vientos:favor"></iron-icon>
          </template>
            [[localize(intent.direction)]]
          </p>
          <h3>[[intent.title]]</h3>
        </div>
        <template is="dom-if" if="[[intent.logo]]">
          <div class="logo">
            <iron-image src="[[_getThumbnailUrl(intent.logo, 200)]]" sizing="contain"></iron-image>
          </div>
        </template>
      </header>
      <template is="dom-if" if="[[showProjects]]">
        <div id="projects">
          <template is="dom-repeat" items="[[_getRef(intent.projects, projects)]]" as="project">
            <p>
              <iron-image src="[[_getThumbnailUrl(project.logo, 26)]]" sizing="contain"></iron-image>
              [[project.name]]
            </p>
          </template>
        </div>
      </template>
      <div id="stats">
        <span>
          <iron-icon icon="vientos:conversation"></iron-icon>
          [[intent.openConversations.length]]
        </span>
        <span>
          <iron-icon icon="vientos:success"></iron-icon>
          <!-- [[intent.collaborations.length]] -->
          [[intent.successfulConversations.length]]
        </span>
        <span>
          <iron-icon icon="vientos:aborted"></iron-icon>
        [[intent.abortedConversations.length]]
        </span>
      </div>
    </vientos-card>
  </template>
  <script src="intent-preview.js"></script>
</dom-module>
