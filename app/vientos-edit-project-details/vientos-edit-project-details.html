<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/vientos-iconset/vientos-iconset.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/google-apis/google-maps-api.html">

<link rel="import" href="../components/vientos-icon-button/vientos-icon-button.html">
<link rel="import" href="../components/vientos-categories-selector/vientos-categories-selector.html">

<link rel="import" href="../vientos-styles/vientos-styles.html">
<link rel="import" href="vientos-edit-project-details-styles.html">

<dom-module id="vientos-edit-project-details">
  <template>

    <style include="vientos-edit-project-details-styles">
    </style>

    <section id="logo">
      <form id="new-image-form">
        <label for="new-image">[[localize('label:image')]]</label>
        <template is="dom-if" if="[[imagePreviewSrc]]">
          <div><iron-image src="[[imagePreviewSrc]]" sizing="contain"></iron-image></div>
        </template>
        <div>
          <input id="new-image"
            type="file"
            accept="image/*"
            on-change="_imageInputChanged">
        </div>
      </form>
    </section>
    <section id="general-info">
      <paper-input value="{{updated.name}}" label="[[localize('label:org-name')]]" required></paper-input>
      <div>
        <paper-textarea
         label="[[localize('label:org-description')]]"
         value="{{updated.description}}"
         required>
       </paper-textarea>
      </div>
    </section>
    <section id="categories">
    <vientos-categories-selector
      categories="[[categories]]"
      selection="[[updated.categories]]"
      on-selection-changed="_categoriesSelectionChanged"></vientos-categories-selector>
    </section>
    <section>
      <ul>
        <template is="dom-repeat" items="[[updated.locations]]" as="placeId">
          <li>
            [[_getPlaceAddress(placeId, places)]]
            <paper-button raised on-tap="_removeLocation">X</paper-button>
          </li>
        </template>
      </ul>
      <google-maps-api id="maps" api-key="[[googleMapsApiKey]]" libraries="places" on-api-load="_onGoogleMapsApiLoad"></google-maps-api>
      <label>
        [[localize('label:address')]]
        <div><input id="place-input"></div>
      </label>
      <paper-button raised on-tap="_addLocation" disabled="[[!newPlace]]">[[localize('button:add-location')]]</paper-button>
    </section>
    <section id="contact-data">
      <p>[[localize('label:contacts')]]</p>
      <ul>
        <template is="dom-repeat" items="[[updated.contacts]]">
          <li>
            <span>[[item]]</span>
            <paper-button raised on-tap="_removeContact">X</paper-button>
          </li>
        </template>
      </ul>
      <paper-input value="{{newContact}}" placeholder="@"></paper-input>
      <paper-button raised on-tap="_addContact" disabled="[[!newContact]]">[[localize('button:add-contact')]]</paper-button>
    </section>
    <section id="web-social-media">
      <p>[[localize('label:links')]]</p>
      <ul>
        <template is="dom-repeat" items="[[updated.links]]">
          <li>
            <span>[[item]]</span>
            <paper-button raised on-tap="_removeLink">X</paper-button>
          </li>
        </template>
      </ul>
      <paper-input value="{{newLink}}" placeholder="https://"></paper-input>
      <paper-button raised on-tap="_addLink" disabled="[[!newLink]]">[[localize('button:add-link')]]</paper-button>
    </section>
    <footer class="simple">
      <paper-button id="button-save" raised on-tap="_save" disabled="[[!readyToSave]]">[[localize('button:save')]]</paper-button>
      <paper-button id="button-cancel" raised on-tap="_cancel">[[localize('button:cancel')]]</paper-button>
    </footer>

  </template>

  <script src="vientos-edit-project-details.js"></script>

</dom-module>
