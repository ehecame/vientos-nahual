<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/vientos-iconset/vientos-iconset.html">

<link rel="import" href="../components/vientos-icon-button/vientos-icon-button.html">

<link rel="import" href="../intent-preview/intent-preview.html">

<link rel="import" href="../vientos-styles/vientos-styles.html">
<link rel="import" href="vientos-me-styles.html">

<dom-module id="vientos-me">
  <template>

    <style include="vientos-me-styles"></style>

    <template is="dom-if" if="[[person]]">
      <paper-button raised on-tap="_editProfile">
        [[localize('button:edit')]]
      </paper-button>
      <div><iron-image src="[[person.logo]]" sizing="contain"></iron-image></div>
      <h2>[[person.name]]</h2>
      <vientos-icon-button raised icon="vientos:user" on-tap="_bye" text="[[localize('button:logout')]]"></vientos-icon-button>
      <template is="dom-if" if="[[person.categories.length]]">
        <section>
          <h3>[[localize('button:my-categories')]]</h3>
          <ul>
            <template is="dom-repeat" items="[[person.categories]]">
              <li><iron-icon icon="vientos:[[item]]"></iron-icon>[[localize(item)]]</li>
            </template>
          </ul>
        </section>
      </template>
      <template is="dom-if" if="[[myProjects.length]]">
        <section>
          <h3>[[localize('label:projects')]]</h3>
          <ul>
            <template is="dom-repeat" items="[[myProjects]]" as="project">
              <li><a href="[[_projectUrl(project)]]">[[project.name]]</a></li>
            </template>
          </ul>
        </section>
      </template>
      <section>
        <template is="dom-if" if="[[addingNewProject]]">
          <div>
            <paper-input value="{{newProjectName}}" label="[[localize('label:org-name')]]"></paper-input>
            <section>
              <paper-button raised on-tap="_crateProject" disabled="[[!newProjectName]]">[[localize('button:save')]]</paper-button>
              <paper-button raised on-tap="_cancelAddingProject">[[localize('button:cancel')]]</paper-button>
            </section>
          </div>
        </template>
        <template is="dom-if" if="[[!addingNewProject]]">
          <paper-button raised on-tap="_startAddingProject">[[localize('button:add-project')]]</paper-button>
        </template>
      </section>
      <section>
        <template is="dom-repeat" items="[[activeIntents]]" as="intent">
          <intent-preview intent="[[intent]]" show-projects show-notification="[[_showNotification(intent, myConversations, notifications)]]"></intent-preview>
        </template>
      </section>
    </template>
    <template is="dom-if" if="[[!person]]">
      <ul id="login-buttons">
        <li><a href="[[login.vientos]]" class="loginBtn loginBtn--vientos">[[localize('button:login-with')]] Vientos</a></li>
        <li><a href="[[login.google]]" class="loginBtn loginBtn--google">[[localize('button:login-with')]] Google</a></li>
        <li><a href="[[login.facebook]]" class="loginBtn loginBtn--facebook">[[localize('button:login-with')]] Facebook</a></li>
      </ul>
    </template>




  </template>

  <script src="vientos-me.js"></script>

</dom-module>
